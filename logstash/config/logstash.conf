input {
	tcp {
		port => 5000
		type => "testFilter"
	}
}

filter {
	grok {
                match => [
				"message", "%{HOSTNAME:ip_host} - - \[%{HTTPDATE:logDate}\] \"%{WORD:method} (?:%{URIPATHPARAM:url}|%{DATA:url}) HTTP/%{NUMBER:httpversion}\" %{WORD:response} (?:%{NUMBER:bytes}|-)"
		]
        }

	date {
		match => ["logDate","dd/MMM/yyyy:HH:mm:ss Z"]
	}

}

output {

	stdout { codec => rubydebug }

	elasticsearch {
                        hosts => "elasticsearch:9200"
        }
}

